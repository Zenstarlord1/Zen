<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Submit Link & Gambar</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <style>
    body { font-family: sans-serif; background: #eee; padding: 20px; }
    .box { background: #fff; padding: 20px; border-radius: 10px; max-width: 500px; margin: auto; box-shadow: 0 0 10px rgba(0,0,0,0.2); }
    input { width: 100%; padding: 10px; margin: 10px 0; border-radius: 6px; border: 1px solid #ccc; }
    button { padding: 10px; width: 100%; background: #4caf50; color: white; border: none; border-radius: 6px; }
    .hidden { display: none; }
    .error { color: red; }
  </style>
</head>
<body>

<div class="box" id="loginBox">
  <h3>Masukkan Password</h3>
  <input type="password" id="pwInput" placeholder="Password...">
  <button onclick="checkPassword()">Masuk</button>
  <p class="error" id="pwError"></p>
</div>

<div class="box hidden" id="formBox">
  <h3>Input Data</h3>
  <input type="text" id="imgUrl" placeholder="Link Gambar (URL)">
  <input type="text" id="targetUrl" placeholder="Link Tujuan (URL)">
  <button onclick="submitData()">Submit</button>
  <p id="statusMsg"></p>
</div>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyDOFcgj8ymBVbWsOWr0oTMArn09fBumnv4",
    authDomain: "zennowser.firebaseapp.com",
    databaseURL: "https://zennowser-default-rtdb.firebaseio.com",
    projectId: "zennowser",
    storageBucket: "zennowser.appspot.com",
    messagingSenderId: "864961650815",
    appId: "1:864961650815:web:94c0a8f902de040a7d5f4a"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  const auth = firebase.auth();

  function checkPassword() {
    const pw = document.getElementById('pwInput').value;
    if (pw === 'Zen10') {
      auth.signInAnonymously().then(() => {
        document.getElementById('loginBox').classList.add('hidden');
        document.getElementById('formBox').classList.remove('hidden');
      });
    } else {
      document.getElementById('pwError').innerText = "Password salah!";
    }
  }

  function submitData() {
    const img = document.getElementById('imgUrl').value.trim();
    const link = document.getElementById('targetUrl').value.trim();
    const status = document.getElementById('statusMsg');

    if (img && link) {
      db.ref('zen10-links').push({ image: img, link: link })
        .then(() => {
          status.innerText = "✅ Berhasil disimpan!";
          document.getElementById('imgUrl').value = '';
          document.getElementById('targetUrl').value = '';
        })
        .catch(err => {
          status.innerText = "❌ Gagal menyimpan: " + err.message;
        });
    } else {
      status.innerText = "❗ Isi semua field!";
    }
  }
</script>

</body>
</html>
